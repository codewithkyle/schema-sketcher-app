import a from"./supercomponent.js";import n from"./env.js";import{html as d,render as l}from"./lit-html.js";import s from"./diagram-controller.js";import o from"./alerts.js";class r extends a{constructor(t,e){super();this.debounceInput=this.debounce(this.updateValue.bind(this),300);this.handleInput=t=>{switch(t.key.toLowerCase()){case"enter":this.settings.addRow();return;case"delete":if(t.ctrlKey){const u=t.currentTarget.dataset.uid;this.removeType(u);return}break;default:break}const i=t.currentTarget.value.trim();this.debounceInput(i)};this.onRemove=async t=>{const i=t.currentTarget.dataset.uid;this.removeType(i)};this.model=t,this.settings=e}async connected(){await n.css(["list-item-input"]),this.render();const t=this.querySelector("input");t&&t.focus()}updateValue(t){s.updateType(this.model.uid,t),o.toast(`Updated column type '${this.model.name}'`)}removeType(t){if(s.deleteType(t)){this.remove(),o.toast(`Deleted column type '${this.model.name}'`);const e=this.settings.querySelector("list-item-input:last-child input");e&&e.focus()}}render(){const t=d`
            <input type="text" data-uid="${this.model.uid}" value="${this.model.name}" @keyup=${this.handleInput}>
            <button data-uid="${this.model.uid}" @click=${this.onRemove}>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        `;l(t,this)}}n.bind("list-item-input",r);export{r as default};
