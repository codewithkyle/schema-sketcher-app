import n from"./env.js";import{publish as s}from"./pubsub.js";import{UUID as d}from"./uuid.js";class i extends HTMLElement{constructor(t,e,r,a,o=[]){super();this.handleMouseEnter=t=>{t.preventDefault(),t.stopImmediatePropagation(),s("canvas",{type:"highlight",ref:this.uid})};this.handleMouseLeave=t=>{t.preventDefault(),t.stopImmediatePropagation(),s("canvas",{type:"clear-highlight",ref:this.uid})};this.startDraw=t=>{t.stopImmediatePropagation(),t.preventDefault();const e=this.getBoundingClientRect();s("canvas",{type:"start",x:e.x,y:e.y,id:this.columnID,tableID:this.tableID,refs:[...this.refs,this.uid]})};this.endDraw=t=>{t.stopImmediatePropagation(),t.preventDefault(),s("canvas",{type:"end",id:this.columnID,tableID:this.tableID,refs:[...this.refs,this.uid]})};this.uid=d(),this.style.cssText=t,this.columnID=e,this.dataset.uid=`${e}_${r}`,this.tableID=a,this.refs=o,n.css(["connector-component"])}connectedCallback(){this.addEventListener("mousedown",this.startDraw),this.addEventListener("mouseup",this.endDraw),this.addEventListener("mouseenter",this.handleMouseEnter),this.addEventListener("mouseleave",this.handleMouseLeave)}}n.bind("connector-component",i);export{i as default};
